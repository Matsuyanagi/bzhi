#include <intrin.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>

#include <iostream>
#include <string>
#include <vector>

#include "binstr.h"

/*
 0 : 0000000000000000 : 00000000-00000000-00000000-00000000-00000000-00000000-00000000-00000000
 1 : 0000000000000001 : 00000000-00000000-00000000-00000000-00000000-00000000-00000000-00000001
 2 : 0000000000000003 : 00000000-00000000-00000000-00000000-00000000-00000000-00000000-00000011
 3 : 0000000000000007 : 00000000-00000000-00000000-00000000-00000000-00000000-00000000-00000111
 4 : 000000000000000f : 00000000-00000000-00000000-00000000-00000000-00000000-00000000-00001111
 5 : 000000000000001f : 00000000-00000000-00000000-00000000-00000000-00000000-00000000-00011111
 6 : 000000000000003f : 00000000-00000000-00000000-00000000-00000000-00000000-00000000-00111111
 7 : 000000000000007f : 00000000-00000000-00000000-00000000-00000000-00000000-00000000-01111111
 8 : 00000000000000ff : 00000000-00000000-00000000-00000000-00000000-00000000-00000000-11111111
 9 : 00000000000001ff : 00000000-00000000-00000000-00000000-00000000-00000000-00000001-11111111
10 : 00000000000003ff : 00000000-00000000-00000000-00000000-00000000-00000000-00000011-11111111
11 : 00000000000007ff : 00000000-00000000-00000000-00000000-00000000-00000000-00000111-11111111
12 : 0000000000000fff : 00000000-00000000-00000000-00000000-00000000-00000000-00001111-11111111
13 : 0000000000001fff : 00000000-00000000-00000000-00000000-00000000-00000000-00011111-11111111
14 : 0000000000003fff : 00000000-00000000-00000000-00000000-00000000-00000000-00111111-11111111
15 : 0000000000007fff : 00000000-00000000-00000000-00000000-00000000-00000000-01111111-11111111
16 : 000000000000ffff : 00000000-00000000-00000000-00000000-00000000-00000000-11111111-11111111
17 : 000000000001ffff : 00000000-00000000-00000000-00000000-00000000-00000001-11111111-11111111
18 : 000000000003ffff : 00000000-00000000-00000000-00000000-00000000-00000011-11111111-11111111
19 : 000000000007ffff : 00000000-00000000-00000000-00000000-00000000-00000111-11111111-11111111
20 : 00000000000fffff : 00000000-00000000-00000000-00000000-00000000-00001111-11111111-11111111
21 : 00000000001fffff : 00000000-00000000-00000000-00000000-00000000-00011111-11111111-11111111
22 : 00000000003fffff : 00000000-00000000-00000000-00000000-00000000-00111111-11111111-11111111
23 : 00000000007fffff : 00000000-00000000-00000000-00000000-00000000-01111111-11111111-11111111
24 : 0000000000ffffff : 00000000-00000000-00000000-00000000-00000000-11111111-11111111-11111111
25 : 0000000001ffffff : 00000000-00000000-00000000-00000000-00000001-11111111-11111111-11111111
26 : 0000000003ffffff : 00000000-00000000-00000000-00000000-00000011-11111111-11111111-11111111
27 : 0000000007ffffff : 00000000-00000000-00000000-00000000-00000111-11111111-11111111-11111111
28 : 000000000fffffff : 00000000-00000000-00000000-00000000-00001111-11111111-11111111-11111111
29 : 000000001fffffff : 00000000-00000000-00000000-00000000-00011111-11111111-11111111-11111111
30 : 000000003fffffff : 00000000-00000000-00000000-00000000-00111111-11111111-11111111-11111111
31 : 000000007fffffff : 00000000-00000000-00000000-00000000-01111111-11111111-11111111-11111111
32 : 00000000ffffffff : 00000000-00000000-00000000-00000000-11111111-11111111-11111111-11111111
33 : 00000001ffffffff : 00000000-00000000-00000000-00000001-11111111-11111111-11111111-11111111
34 : 00000003ffffffff : 00000000-00000000-00000000-00000011-11111111-11111111-11111111-11111111
35 : 00000007ffffffff : 00000000-00000000-00000000-00000111-11111111-11111111-11111111-11111111
36 : 0000000fffffffff : 00000000-00000000-00000000-00001111-11111111-11111111-11111111-11111111
37 : 0000001fffffffff : 00000000-00000000-00000000-00011111-11111111-11111111-11111111-11111111
38 : 0000003fffffffff : 00000000-00000000-00000000-00111111-11111111-11111111-11111111-11111111
39 : 0000007fffffffff : 00000000-00000000-00000000-01111111-11111111-11111111-11111111-11111111
40 : 000000ffffffffff : 00000000-00000000-00000000-11111111-11111111-11111111-11111111-11111111
41 : 000001ffffffffff : 00000000-00000000-00000001-11111111-11111111-11111111-11111111-11111111
42 : 000003ffffffffff : 00000000-00000000-00000011-11111111-11111111-11111111-11111111-11111111
43 : 000007ffffffffff : 00000000-00000000-00000111-11111111-11111111-11111111-11111111-11111111
44 : 00000fffffffffff : 00000000-00000000-00001111-11111111-11111111-11111111-11111111-11111111
45 : 00001fffffffffff : 00000000-00000000-00011111-11111111-11111111-11111111-11111111-11111111
46 : 00003fffffffffff : 00000000-00000000-00111111-11111111-11111111-11111111-11111111-11111111
47 : 00007fffffffffff : 00000000-00000000-01111111-11111111-11111111-11111111-11111111-11111111
48 : 0000ffffffffffff : 00000000-00000000-11111111-11111111-11111111-11111111-11111111-11111111
49 : 0001ffffffffffff : 00000000-00000001-11111111-11111111-11111111-11111111-11111111-11111111
50 : 0003ffffffffffff : 00000000-00000011-11111111-11111111-11111111-11111111-11111111-11111111
51 : 0007ffffffffffff : 00000000-00000111-11111111-11111111-11111111-11111111-11111111-11111111
52 : 000fffffffffffff : 00000000-00001111-11111111-11111111-11111111-11111111-11111111-11111111
53 : 001fffffffffffff : 00000000-00011111-11111111-11111111-11111111-11111111-11111111-11111111
54 : 003fffffffffffff : 00000000-00111111-11111111-11111111-11111111-11111111-11111111-11111111
55 : 007fffffffffffff : 00000000-01111111-11111111-11111111-11111111-11111111-11111111-11111111
56 : 00ffffffffffffff : 00000000-11111111-11111111-11111111-11111111-11111111-11111111-11111111
57 : 01ffffffffffffff : 00000001-11111111-11111111-11111111-11111111-11111111-11111111-11111111
58 : 03ffffffffffffff : 00000011-11111111-11111111-11111111-11111111-11111111-11111111-11111111
59 : 07ffffffffffffff : 00000111-11111111-11111111-11111111-11111111-11111111-11111111-11111111
60 : 0fffffffffffffff : 00001111-11111111-11111111-11111111-11111111-11111111-11111111-11111111
61 : 1fffffffffffffff : 00011111-11111111-11111111-11111111-11111111-11111111-11111111-11111111
62 : 3fffffffffffffff : 00111111-11111111-11111111-11111111-11111111-11111111-11111111-11111111
63 : 7fffffffffffffff : 01111111-11111111-11111111-11111111-11111111-11111111-11111111-11111111

 */

int main() {
	uint64_t a = 0xFFFF'FFFF'FFFF'FFFF;

	for ( size_t i = 0; i < 64; i++ ) {
		uint64_t result = _bzhi_u64( a, i );

		std::string result_str = binstr( result );
		printf( "%2d : %016llx : %s\n", i, result, result_str.c_str() );
	}
}
